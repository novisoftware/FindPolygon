# FindPolygon - Count up polygons in plane (多角形を数え上げる問題の解法の例)
## この資材について
東京大学の伊東乾先生が、塩野直道氏( https://ja.wikipedia.org/wiki/%E5%A1%A9%E9%87%8E%E7%9B%B4%E9%81%93 )による1930年代の「尋常小学算術」(緑表紙)4年生用の問題として紹介されていた、以下の問題があります。
![図1: 問：](/doc/image/fig1.png) 
- この図形の中に含まれる四辺形を残さず挙げよ。
- 何種類、合計何個あるだろうか?

紹介のコラム記事は https://jbpress.ismedia.jp/articles/-/70681 で、この「尋常小学算術」(緑表紙)が日本近代教科書として非常に高く評価されることが記載されており、計算機を使用してこの問題を解くことが、計算機を使用したレクリエーションとして興味深いと思い、数を数える部分の解法を作成しました(種類を数え上げる部分はそこまで興味を持っていなかったため)。

この資材では、蛇足で、四角形以外の三角形、五角形も探すようにしてみています。

## 解法について
図形を構成する16か所の断片にあらかじめ番号を決め、16か所の断片のオンオフ、 2^16 - 1 = 65535 通りに対して、「1つながりか?(単連結か)」「四角形か?」をしらみつぶしに探します。
(この問題では「凸四角形か?」を確かめる必要はありません)
![図2: 図形を構成する16か所の断片にあらかじめ番号を決める](/doc/image/fig2.png) 

図形全体を構成する16の領域のそれぞれの有無を総当たりで発生させ(2^16-1 = 65535通り)、以下を行います。
- 1 - 65535 の連番を生成する
- 連番の2進数ビットの1/0を、16か所の断片のオン/オフに対応させ、連番に対応する図形を生成する
- 幅優先探索アルゴリズムにより、単連結かを判定(ひとかたまりにつながっている図形であるか)する
- 図形が含む断片の頂点を集める
- 辺の抽出
- 頂点の数による絞り込み

## 必要な環境
- Java 1.8 以降が必要です。
- 動作確認は Windows 10 環境で行っています。
    - フォント "UD デジタル 教科書体 N-B" がインストールされている方が望ましいです。
    - 好みで Preference.java を書き換えればいいと思います。
- 上記以外の環境でも動くかもしれませんが、試していません。

## プログラムの動かし方
### 起動方法
jarを起動します。
java -jar findPolygon.jar

### 操作方法
表示条件を選び「表示する」ボタンを押すことで、指定された条件に対する結果が表示されます。
![図3: 表示されている様子](/doc/image/fig3.png) 

